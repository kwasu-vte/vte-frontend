# **Definitive Components and Views Implementation Guide**

**Developer's Prime Directive:** Your primary toolkit is **NextUI**. Build everything with it, themed by our design system. Custom components should be created only to encapsulate complex, reusable business logic or to compose NextUI components into a specific, recurring feature pattern. Every component that handles data **must** account for all possible states (loading, error, empty, success).

---

## **Part 1: Layout Components (`src/components/layout/`)**

These components form the skeleton of the authenticated application. They are crucial for consistency.

| Component             | Implementation Guide                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| :-------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`<AppShell />`**    | **Purpose:** The main application layout that provides consistent structure for all authenticated pages. <br> **Composition:** A two-column CSS grid (`grid-cols-[280px_1fr]`). The first column holds `<Sidebar />`. The second column holds a `div` containing a sticky `<Header />` and a `<main>` element that renders `{children}` with appropriate padding (`p-6 md:p-8`). <br> **Data/Props:** Accepts `{children: React.ReactNode}`. <br> **State Logic:** This component will be used in a server component (`layout.tsx`) that fetches the `user` session data and passes it down to the client components `Sidebar` and `Header` via props or context. |
| **`<Sidebar />`**     | **Purpose:** To provide role-based primary navigation. <br> **Composition:** A `nav` element styled as a vertical flex container with a border. It includes a header section with the VTE logo, a main navigation section that maps over `navigationItems`, and a footer section with a user profile summary. Each link is a `<SidebarLink />`. <br> **Data/Props:** `navigationItems: NavigationItem[]`, `user: User`. <br> **State Logic:** Uses the Next.js `usePathname` hook to determine the active route and apply an active style to the corresponding `<SidebarLink />`. |
| **`<Header />`**      | **Purpose:** To provide contextual navigation and user-specific actions. <br> **Composition:** A `header` element styled as a sticky, horizontal flex container with a bottom border. On the left, it contains a NextUI `<Breadcrumb />`. On the right, it contains a `<UserProfileDropdown />`. <br> **Data/Props:** `breadcrumbs: BreadcrumbItem[]`, `user: User`. |

---

## **Part 2: Shared Components (`src/components/shared/`)**

These are high-level, reusable components that encapsulate significant logic and are used across multiple features.

| Component              | Implementation Guide                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **`<StateRenderer />`**| **Purpose:** The **mandatory** wrapper for displaying all asynchronous data to handle every UI state. <br> **Composition:** A component that implements the conditional rendering logic: <br> 1. If `isLoading`, render the `loadingComponent` prop (defaults to a NextUI `<Spinner />` or `<Skeleton />`). <br> 2. If `error`, render the `errorComponent` prop (defaults to an `<Alert>` with a message). <br> 3. If `data` is empty (null, undefined, or an empty array), render the `emptyComponent` prop. <br> 4. Otherwise, call the `{children}` render prop with the data. <br> **Data/Props:** `data`, `isLoading`, `error`, `loadingComponent?`, `errorComponent?`, `emptyComponent?`, `children`. |
| **`<DataTable />`**    | **Purpose:** A consistent, feature-rich table for displaying lists of data. <br> **Composition:** A wrapper around the NextUI `<Table>` component. It will manage the state for sorting, pagination, and row selection. <br> 1. **Top Toolbar:** A slot for filters, search `<Input>`, and action `<Button>`s. <br> 2. **Table:** Uses `<TableHeader>`, `<TableColumn>`, `<TableBody>`, `<TableRow>`, and `<TableCell>`. It maps a `columns` prop to render the header and uses a `renderCell` callback to render the body content, allowing for custom cell types (e.g., Avatars, Badges, Dropdowns). <br> 3. **Pagination:** A NextUI `<Pagination>` component at the bottom, controlled by props. <br> **Data/Props:** `data`, `columns`, `isLoading`, `error`, `paginationState`, `renderCell`, `emptyStateContent`, `toolbarContent`. |
| **`<StatCard />`**     | **Purpose:** To display a single key metric on dashboards. <br> **Composition:** A NextUI `<Card>` with `shadow="sm"`. Inside the `<CardBody>`, use a horizontal flex layout containing an `icon` element and a vertical text group with a `title` (`text-sm text-neutral-400`) and a `value` (`text-2xl font-bold text-neutral-900`). <br> **Data/Props:** `title: string`, `value: string | number`, `icon: React.ReactNode`, `href?: string` (makes the card `isPressable`). |
| **`<CalendarView />`** | **Purpose:** To display scheduled activities for admins and mentors. <br> **Composition:** A client component that wraps a third-party calendar library like `react-big-calendar`. It will be styled to match our design system. <br> **Data/Props:** `events: Activity[]`. It will need functions to handle event clicks, which can open a `<Modal>` with activity details. |

---

## **Part 3: Feature Components (`src/components/features/`)**

These components are tailored to a specific business domain or user flow.

#### **Admin Features**

| Component                   | Implementation Guide                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| :-------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`<SkillsTable />`**       | **Purpose:** A specialized implementation of the shared `<DataTable />` for displaying skills. <br> **Composition:** This component will configure and wrap the shared `<DataTable />`. It defines the specific `columns` array for skills (`[{key: 'title', label: 'Title'}, {key: 'price', label: 'Price'}, ...]`). It provides a `renderCell` callback that uses a `switch` statement to render custom cells: `price` is formatted as currency, `capacity` is shown as a fraction with a `<Progress>` bar, and the `actions` cell renders a NextUI `<Dropdown>` with "Edit" and "Delete" items that trigger modals or server actions. <br> **Data/Props:** `skills: Skill[]`. |
| **`<StudentsTable />`**     | **Purpose:** A specialized `<DataTable />` for managing students. <br> **Composition:** Similar to `SkillsTable`, it defines columns for Name, Matric Number, Level, and Group. The Name cell will render a NextUI `<User>` component with an avatar and email. The `toolbarContent` prop will be populated with a "Filter by Level" `<Select>` and an "Auto-assign" `Button`. It will also manage the state for row selection and display a contextual toolbar for bulk actions. <br> **Data/Props:** `students: User[]`. |
| **`<GroupsTable />`**       | **Purpose:** A specialized `<DataTable />` for managing groups. <br> **Composition:** Defines columns for Group Name, Skill, Mentor, and Member Count. The Mentor cell will render a `<User>` component. The "Actions" dropdown will include "Edit Mentor," "View Details," and "Delete." <br> **Data/Props:** `groups: Group[]`. |
| **`<SystemConfigForm />`**  | **Purpose:** The form for editing system-wide settings. <br> **Composition:** A client component using `react-hook-form` and `Zod`. It renders a series of form fields inside a `<CardBody>`: NextUI `<DatePicker>` for dates, `<Input type="number">` for numeric settings, and `<Switch>` for boolean toggles. A `<CardFooter>` contains a single "Save Settings" `Button` which shows an `isLoading` state during submission. <br> **Data/Flow:** Uses `useQuery` to fetch initial data. The `onSubmit` handler calls a Server Action and displays a success/error toast from `sonner`. |

#### **Student & Mentor Features**

| Component                     | Implementation Guide                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| :---------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`<SkillSelectionForm />`**  | **Purpose:** The main interface for students to select their skills. <br> **Composition:** An `<Alert>` at the top displays the `maxSkillsPerStudent` rule. The main body is a responsive grid of skills. Each skill is a NextUI `<Card>` with `isPressable`. The card contains a `<Checkbox>` to select it. The component tracks the number of selected skills and disables all un-selected checkboxes when the maximum is reached. A sticky footer contains a "Submit Selection" `Button`. <br> **State Logic:** Manages a local state array of selected skill IDs. <br> **Data Flow:** Receives `availableSkills: Skill[]` and `config: SystemConfig` as props. Submit button calls a Server Action. |
| **`<QRCodeScanner />`**       | **Purpose:** To scan QR codes for attendance. <br> **Composition:** A client component that uses a library like `react-qr-reader`. It will display a video feed from the user's camera within a container. An overlay UI with a square viewfinder helps the user align the QR code. It will manage its own internal states: "Requesting camera," "Scanning," "Success," and "Error," displaying feedback to the user via text or alerts within the component. <br> **Data Flow:** On a successful scan, it calls a Server Action to submit the attendance data and displays the result from the action. |

#### **Authentication Features**

| Component                 | Implementation Guide                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| :------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`<SignInForm />`**      | **Purpose:** To handle user login. <br> **Composition:** A client component using `react-hook-form` and `Zod`. It is a `<form>` containing `FormField`s (custom components for `Label` + `Input` + error message) for `email` and `password`. The submit `<Button>` is full-width and shows a loading spinner during the action call. A root-level `<Alert>` component within the form displays any global error messages returned from the Server Action. <br> **Data Flow:** The `onSubmit` handler calls the `signIn` Server Action. It handles only form state and UI feedback. |
| **`<SignUpForm />`**      | **Purpose:** To handle student registration. <br> **Composition:** Similar to `SignInForm`, but with additional fields for First Name, Last Name, Matric Number, Level, and Password Confirmation. It will include client-side validation to ensure passwords match before enabling the submit button. <br> **Data Flow:** Calls the `signUp` Server Action. |